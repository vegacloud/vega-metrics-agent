time="2025-01-07T18:12:07Z" level=info msg="Starting Vega Kubernetes and Container Metrics Agent" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud version=1.1.3
time="2025-01-07T18:12:07Z" level=debug msg="Configuration: &{AgentID:4487b077-76e5-4f66-8508-b59f7701056f VegaClientID:305b37fa-e2ec-4c43-9c41-22ce007130be VegaClientSecret:ELRwBsUpSGuCiSdwe9Zvs7IbwFSaM8Gz VegaClusterName:testcluster-2 VegaOrgSlug:vegacloud VegaPollInterval:1h0m0s VegaUploadRegion:us-west-2 VegaParseMetricData:false VegaInsecure:true VegaWorkDir:/tmp VegaCollectionRetryLimit:3 VegaBearerTokenPath:/var/run/secrets/kubernetes.io/serviceaccount/token VegaNamespace:vegacloud MetricsCollectorAPI:https://api.dpz.vegacloud.io/metrics AuthServiceURL:https://authdev.vegacloud.io StartCollectionNow:true SaveLocal:false VegaMaxConcurrency:8 ShouldAgentCheckIn:true LogLevel:DEBUG SchemaVersion:1.2.0 AgentVersion:1.1.3 ClusterVersion: ClusterProvider: QPS:100 Burst:100 Timeout:10s}"
time="2025-01-07T18:12:07Z" level=debug msg="Initializing metrics agent..." client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:07Z" level=debug msg="Configuring TLS transport..." client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:07Z" level=debug msg="Successfully created TLS transport" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 insecure=true org_slug=vegacloud
time="2025-01-07T18:12:07Z" level=debug msg="Starting Kubernetes client initialization..." client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:07Z" level=debug msg="Getting Kubernetes client configuration..." client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:07Z" level=debug msg="Successfully read service token" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImY2ZGM4M2M0ZTEwZWNmODJhN2E3MzhhYWFmZDU4MGQwM2VhMGM4NTkifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjIl0sImV4cCI6MTc2NzgwOTUyNSwiaWF0IjoxNzM2MjczNTI1LCJpc3MiOiJodHRwczovL29pZGMuZWtzLnVzLXdlc3QtMi5hbWF6b25hd3MuY29tL2lkLzQ2MjU3MTM2QkQ3ODJFQUQ0NjBFNkJCMTkwQTRBQTlFIiwianRpIjoiZDJlOGQ2OGMtYjhjZi00ZTEzLTkyN2UtOGY2ZDMyZTRiMmZmIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJ2ZWdhY2xvdWQiLCJub2RlIjp7Im5hbWUiOiJpcC0xMC0xNC0yLTE3Ni51cy13ZXN0LTIuY29tcHV0ZS5pbnRlcm5hbCIsInVpZCI6ImY3MDFhNWI0LWJhNDItNGY5My04NmE5LTM3MDJmOTMzOWJmZCJ9LCJwb2QiOnsibmFtZSI6Im1ldHJpY3MtYWdlbnQtOGJiNTk2Yzg2LXBkbHE2IiwidWlkIjoiOTgyNjcyYmEtNmVmNS00YjBhLThlZGQtOWUwODcxOWY0YWY2In0sInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJ2ZWdhLW1ldHJpY3Mtc2EiLCJ1aWQiOiI5ZTYwZDliZC0wZmY0LTRhNTItOGI2MC0xMTdiOWNmZjJjZGYifSwid2FybmFmdGVyIjoxNzM2Mjc3MTMyfSwibmJmIjoxNzM2MjczNTI1LCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6dmVnYWNsb3VkOnZlZ2EtbWV0cmljcy1zYSJ9.b4fywVhJiO8KguxCrpXL_Mncu2Ynd-uAG7x6eSqU3QvP1PM9HMqEujznJ9_1V99wsK7vGI20F8oJVyHSJZcDsBksy8ua15-PO3QdVPqldyotYXTNclaXlVy5oS0Exn1NPKzWolfQ35kelZuEUMMBduwrbjkIp3WD-MsQzH_orwG1pMb9Nb0HvjQagh80LE2YwV87i25_gnuuCCZJNZAHR5OoPtb27wwVZOM8_1fOk9wIevtDHWiVxgH1z0m0YClmE2NVdISI6eEGDux5vaOhaUUW5yZgXvlBTOHyV-Lg4MZurzWd9Jqdb-5FqdMzXCISdL1ATwAX_oCQ9lyNuj26Jg
time="2025-01-07T18:12:07Z" level=debug msg="GetClientConfig: Attempting to get Kubernetes client configuration"
time="2025-01-07T18:12:07Z" level=debug msg="Using explicit service account token" burst=100 qps=100 timeout=10s token_len=1270 token_path=/var/run/secrets/kubernetes.io/serviceaccount/token
time="2025-01-07T18:12:07Z" level=debug msg="Attempting to get namespace vegacloud"
time="2025-01-07T18:12:07Z" level=debug msg="Service account token exists and is readable"
time="2025-01-07T18:12:07Z" level=info msg="createClientConfig: Successfully created Kubernetes client configuration. Cluster URL: https://172.20.0.1:443"
time="2025-01-07T18:12:07Z" level=info msg="Current identity" function=logCurrentIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:07Z" level=debug msg="Current permissions" function=logCurrentIdentity rules="[{[create] [authorization.k8s.io] [selfsubjectaccessreviews selfsubjectrulesreviews] []} {[create] [authentication.k8s.io] [selfsubjectreviews] []} {[create] [authentication.k8s.io] [selfsubjectreviews] []} {[get list watch] [] [configmaps endpoints events limitranges limitranges/status namespaces namespaces/finalizers namespaces/status nodes nodes/log nodes/metrics nodes/proxy nodes/stats nodes/stats/summary nodes/status persistentvolumeclaims persistentvolumeclaims/status persistentvolumes persistentvolumes/status pods pods/ephemeralcontainers pods/exec pods/log pods/metrics pods/portforward pods/proxy pods/stats pods/status replicationcontrollers resourcequotas resourcequotas/status serviceaccounts services services/proxy services/status] []} {[get list watch] [batch apps] [cronjobs cronjobs/status daemonsets daemonsets/status deployments deployments/scale deployments/status jobs jobs/status replicasets replicasets/scale replicasets/status statefulsets statefulsets/scale statefulsets/status] []} {[get list watch] [networking.k8s.io extensions] [ingresses ingresses/status ingressclasses networkpolicies networkpolicies/status] []} {[get list watch] [metrics.k8s.io custom.metrics.k8s.io external.metrics.k8s.io pohpa.metrics.k8s.io] [* pods/recommendations] []} {[get list watch] [autoscaling autoscaling.k8s.io] [horizontalpodautoscalers horizontalpodautoscalers/scale horizontalpodautoscalers/status verticalpodautoscalers verticalpodautoscalers/status] []} {[get list watch] [storage.k8s.io snapshot.storage.k8s.io csi.storage.k8s.io] [storageclasses volumeattachments volumeattachments/status csidrivers csinodes csistoragecapacities volumeattributes volumesnapshots volumesnapshots/status volumesnapshotcontents volumesnapshotclasses csiservices] []} {[get list watch] [policy security.k8s.io] [poddisruptionbudgets poddisruptionbudgets/status podlabels podmetrics podsecuritypolicies securitycontextconstraints] []} {[get list watch] [coordination.k8s.io] [leases] []} {[get list watch] [node.k8s.io] [runtimeclasses runtimeclasses/status] []} {[get list watch] [nvidia.com] [gpus podgpus] []} {[get list watch] [topology.kubernetes.io] [nodes noderesourcetopologies topologyspreadconstraints] []} {[get list watch] [events.k8s.io] [events] []}]"
time="2025-01-07T18:12:07Z" level=debug msg="Successfully obtained Kubernetes client configuration" bearer_token_path=/var/run/secrets/kubernetes.io/serviceaccount/token burst=100 client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 host="https://172.20.0.1:443" org_slug=vegacloud qps=100 timeout=10s
time="2025-01-07T18:12:07Z" level=info msg="Kubernetes configuration details" bearer_token_file=/var/run/secrets/kubernetes.io/serviceaccount/token burst=100 ca_file=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_host_url="https://172.20.0.1:443" cluster_name=testcluster-2 cluster_uid=b426636a-8587-4163-86ed-21517b44ff95 cluster_version=v1.30.8-eks-2d5f260 insecure_skip_verify=false namespace=vegacloud org_slug=vegacloud qps=100 server_name= timeout=10s use_in_cluster_config=true
time="2025-01-07T18:12:07Z" level=debug msg="Configuring TLS for kubelet client" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:07Z" level=debug msg="Successfully configured TLS for kubelet client" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 insecure=true org_slug=vegacloud transport_type="*http.Transport"
time="2025-01-07T18:12:07Z" level=debug msg="Creating metrics agent..." client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:08Z" level=info msg="Cluster version: v1.30.8-eks-2d5f260" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:08Z" level=info msg="Cluster provider: AWS" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:08Z" level=debug msg="Starting ClusterCollector"
time="2025-01-07T18:12:08Z" level=debug msg="ClusterCollector initialized successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Creating new NamespaceCollector"
time="2025-01-07T18:12:08Z" level=debug msg="NodeCollector initialized successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Starting PodCollector"
time="2025-01-07T18:12:08Z" level=debug msg="PodCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Creating new PersistentVolumeCollector"
time="2025-01-07T18:12:08Z" level=debug msg="PersistentVolumeCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Creating new PersistentVolumeClaimCollector"
time="2025-01-07T18:12:08Z" level=debug msg="PersistentVolumeClaimCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Creating new WorkloadCollector"
time="2025-01-07T18:12:08Z" level=debug msg="WorkloadCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Starting DaemonSetCollector"
time="2025-01-07T18:12:08Z" level=debug msg="DaemonSetCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Starting NetworkingCollector"
time="2025-01-07T18:12:08Z" level=debug msg="NetworkingCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Starting JobCollector"
time="2025-01-07T18:12:08Z" level=debug msg="JobCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="CronJobCollector initialized successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Starting HPACollector"
time="2025-01-07T18:12:08Z" level=debug msg="HPACollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Creating new ReplicationControllerCollector"
time="2025-01-07T18:12:08Z" level=debug msg="ReplicationControllerCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="StorageClassCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="Creating new ReplicaSetCollector"
time="2025-01-07T18:12:08Z" level=debug msg="ReplicaSetCollector created successfully"
time="2025-01-07T18:12:08Z" level=debug msg="loaded 15 collectors" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:08Z" level=debug msg="Attempting to check in with the metrics server" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:08Z" level=debug msg="Successfully listed persistent volumes" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected persistent volume metrics" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Processing daemonset" daemonset=aws-node namespace=kube-system
time="2025-01-07T18:12:08Z" level=debug msg="Converted daemonset to metrics" daemonset=aws-node desired=2 namespace=kube-system ready=2
time="2025-01-07T18:12:08Z" level=debug msg="Processing daemonset" daemonset=kube-proxy namespace=kube-system
time="2025-01-07T18:12:08Z" level=debug msg="Converted daemonset to metrics" daemonset=kube-proxy desired=2 namespace=kube-system ready=2
time="2025-01-07T18:12:08Z" level=debug msg="Collected daemonset metrics" count=2
time="2025-01-07T18:12:08Z" level=debug msg="Successfully listed 0 cron jobs"
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for 0 cron jobs"
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for HPAs" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected HPA metrics" count=0
time="2025-01-07T18:12:08Z" level=info msg="Current client identity" function=VerifyClientIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:08Z" level=debug msg="Verified collector client identity" collector=PodCollector
time="2025-01-07T18:12:08Z" level=debug msg="Successfully listed 7 pods"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod kube-system/aws-node-cxkg6"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod kube-system/aws-node-cxkg6: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod kube-system/aws-node-cxkg6"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod kube-system/aws-node-dgctk"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod kube-system/aws-node-dgctk: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod kube-system/aws-node-dgctk"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod kube-system/coredns-787cb67946-ct9fg"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod kube-system/coredns-787cb67946-ct9fg: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod kube-system/coredns-787cb67946-ct9fg"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod kube-system/coredns-787cb67946-jg7pm"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod kube-system/coredns-787cb67946-jg7pm: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod kube-system/coredns-787cb67946-jg7pm"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod kube-system/kube-proxy-dl68b"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod kube-system/kube-proxy-dl68b: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod kube-system/kube-proxy-dl68b"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod kube-system/kube-proxy-tvzbn"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod kube-system/kube-proxy-tvzbn: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod kube-system/kube-proxy-tvzbn"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully extracted container metrics for pod vegacloud/metrics-agent-8bb596c86-pdlq6"
time="2025-01-07T18:12:08Z" level=debug msg="Total restarts for pod vegacloud/metrics-agent-8bb596c86-pdlq6: 0"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected metrics for pod vegacloud/metrics-agent-8bb596c86-pdlq6"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected enhanced pod metrics"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected pod metrics"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected job metrics" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Successfully listed ReplicaSets" count=2
time="2025-01-07T18:12:08Z" level=debug msg="Processing ReplicaSet" namespace=kube-system replicaset=coredns-787cb67946
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for ReplicaSet" available=2 conditions=0 namespace=kube-system ready=2 replicas=2 replicaset=coredns-787cb67946
time="2025-01-07T18:12:08Z" level=debug msg="Processing ReplicaSet" namespace=vegacloud replicaset=metrics-agent-8bb596c86
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for ReplicaSet" available=1 conditions=0 namespace=vegacloud ready=1 replicas=1 replicaset=metrics-agent-8bb596c86
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected replicaset metrics" count=2
time="2025-01-07T18:12:08Z" level=debug msg="Successfully listed persistent volume claims" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected PVC metrics" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Processing deployment" deployment=coredns namespace=kube-system
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for deployment" available=2 deployment=coredns namespace=kube-system ready=2 replicas=2
time="2025-01-07T18:12:08Z" level=debug msg="Processing deployment" deployment=metrics-agent namespace=vegacloud
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for deployment" available=1 deployment=metrics-agent namespace=vegacloud ready=1 replicas=1
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected deployment metrics" count=2
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for 0 statefulsets"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected statefulset metrics" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for 2 daemonsets"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected daemonset metrics" count=2
time="2025-01-07T18:12:08Z" level=debug msg="Collected metrics for 0 jobs"
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected job metrics" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Successfully listed replication controllers" count=0
time="2025-01-07T18:12:08Z" level=debug msg="Successfully collected replication controller metrics" count=0
time="2025-01-07T18:12:09Z" level=debug msg="Collected capacity metrics" provisionedCount=0 storageClass=gp2 totalRequested=0
time="2025-01-07T18:12:09Z" level=debug msg="Parsed metrics for storage class gp2"
time="2025-01-07T18:12:09Z" level=debug msg="Successfully collected metrics for 1 storage classes"
time="2025-01-07T18:12:09Z" level=debug msg="Service account token length: 1270" collector=ClusterCollector
time="2025-01-07T18:12:09Z" level=info msg="Current client identity" function=VerifyClientIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:09Z" level=debug msg="Verified collector client identity" collector=ClusterCollector
time="2025-01-07T18:12:09Z" level=debug msg="Successfully listed 2 nodes" collector=ClusterCollector
time="2025-01-07T18:12:09Z" level=debug msg="Successfully listed 7 pods" collector=ClusterCollector
time="2025-01-07T18:12:09Z" level=debug msg="Calculated total capacity: CPU=4000, Memory=8027226112, Storage=0, EphemeralStorage=94345798292, Pods=34, GPUs=0"
time="2025-01-07T18:12:09Z" level=debug msg="Calculated total allocatable: CPU=3860, Memory=6890569728, Storage=0, EphemeralStorage=94345798292, Pods=34, GPUs=0"
time="2025-01-07T18:12:09Z" level=debug msg="Calculated total requests: CPU=1000, Memory=1220542464, EphemeralStorage=0, Pods=7, GPUs=0"
time="2025-01-07T18:12:09Z" level=debug msg="Calculated total limits: CPU=1000, Memory=4651483136, EphemeralStorage=0, Pods=7, GPUs=0"
time="2025-01-07T18:12:09Z" level=debug msg="Successfully collected HPA metrics" count=1
time="2025-01-07T18:12:09Z" level=debug msg="Collecting namespace metrics"
time="2025-01-07T18:12:09Z" level=debug msg="Processing namespace" namespace=default
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=default pods=0 storage=0
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=default quotasCount=0
time="2025-01-07T18:12:09Z" level=debug msg="Processing namespace" namespace=kube-node-lease
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=kube-node-lease pods=0 storage=0
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-node-lease quotasCount=0
time="2025-01-07T18:12:09Z" level=debug msg="Processing namespace" namespace=kube-public
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=kube-public pods=0 storage=0
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-public quotasCount=0
time="2025-01-07T18:12:09Z" level=debug msg="Processing namespace" namespace=kube-system
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace usage metrics" cpu=500 memory=146800640 namespace=kube-system pods=6 storage=0
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-system quotasCount=0
time="2025-01-07T18:12:09Z" level=debug msg="Processing namespace" namespace=vegacloud
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace usage metrics" cpu=500 memory=1073741824 namespace=vegacloud pods=1 storage=0
time="2025-01-07T18:12:09Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=vegacloud quotasCount=0
time="2025-01-07T18:12:09Z" level=debug msg="Completed namespace metrics collection" count=5
time="2025-01-07T18:12:09Z" level=debug msg="Processing service" namespace=default service=kubernetes
time="2025-01-07T18:12:09Z" level=debug msg="Parsed service metrics" namespace=default ports=1 service=kubernetes type=ClusterIP
time="2025-01-07T18:12:09Z" level=debug msg="Processing service" namespace=kube-system service=eks-extension-metrics-api
time="2025-01-07T18:12:09Z" level=debug msg="Parsed service metrics" namespace=kube-system ports=1 service=eks-extension-metrics-api type=ClusterIP
time="2025-01-07T18:12:09Z" level=debug msg="Processing service" namespace=kube-system service=kube-dns
time="2025-01-07T18:12:09Z" level=debug msg="Parsed service metrics" namespace=kube-system ports=3 service=kube-dns type=ClusterIP
time="2025-01-07T18:12:09Z" level=debug msg="Collected service metrics" count=3
time="2025-01-07T18:12:09Z" level=debug msg="Successfully listed 0 ingresses"
time="2025-01-07T18:12:09Z" level=debug msg="Successfully listed 0 network policies"
time="2025-01-07T18:12:09Z" level=debug msg="Collector status length" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector_status_length=15 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:09Z" level=debug msg="Agent status" agent_status=Error client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:09Z" level=debug msg=Payload client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud payload="{\"agent_id\":\"4487b077-76e5-4f66-8508-b59f7701056f\",\"cluster_name\":\"testcluster-2\",\"cluster_version\":\"v1.30.8-eks-2d5f260\",\"agent_version\":\"1.1.3\",\"schema_version\":\"1.2.0\",\"cluster_provider\":\"AWS\",\"agent_status\":\"Error\",\"collector_status\":{\"cluster\":\"Ok\",\"cronjob\":\"Ok\",\"daemonset\":\"Ok\",\"hpa\":\"Ok\",\"job\":\"Ok\",\"namespace\":\"Ok\",\"network\":\"Ok\",\"node\":\"Ok\",\"pod\":\"Ok\",\"pv\":\"Ok\",\"pvc\":\"Ok\",\"replicaset\":\"Ok\",\"replicationcontroller\":\"Ok\",\"storageclass\":\"Ok\",\"workload\":\"Ok\"}}"
time="2025-01-07T18:12:09Z" level=debug msg="Payload Json" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud payload_string="{\"agent_id\":\"4487b077-76e5-4f66-8508-b59f7701056f\",\"cluster_name\":\"testcluster-2\",\"cluster_version\":\"v1.30.8-eks-2d5f260\",\"agent_version\":\"1.1.3\",\"schema_version\":\"1.2.0\",\"cluster_provider\":\"AWS\",\"agent_status\":\"Error\",\"collector_status\":{\"cluster\":\"Ok\",\"cronjob\":\"Ok\",\"daemonset\":\"Ok\",\"hpa\":\"Ok\",\"job\":\"Ok\",\"namespace\":\"Ok\",\"network\":\"Ok\",\"node\":\"Ok\",\"pod\":\"Ok\",\"pv\":\"Ok\",\"pvc\":\"Ok\",\"replicaset\":\"Ok\",\"replicationcontroller\":\"Ok\",\"storageclass\":\"Ok\",\"workload\":\"Ok\"}}"
time="2025-01-07T18:12:09Z" level=debug msg="Getting auth token" authURL="https://authdev.vegacloud.io/realms/vegacloud/protocol/openid-connect/token" clientID=305b37fa-e2ec-4c43-9c41-22ce007130be function=GetVegaAuthToken slug=vegacloud url="https://authdev.vegacloud.io"
time="2025-01-07T18:12:09Z" level=debug msg="Auth token obtained successfully" accessToken=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ6emV0cGJOdzcwU2ZveDM3c1FCQkw0akFuY2FfN0tNemw3dXBQUXdRdVdJIn0.eyJleHAiOjE3MzYzMDk1MjksImlhdCI6MTczNjI3MzUyOSwianRpIjoiNmI0YzBmYTYtMGVjMy00ZGU1LWEyMWUtZmM1MjI4NDUxMTIwIiwiaXNzIjoiaHR0cHM6Ly9hdXRoZGV2LnZlZ2FjbG91ZC5pby9yZWFsbXMvdmVnYWNsb3VkIiwiYXVkIjpbInJlYWxtLW1hbmFnZW1lbnQiLCJhd3Mtb3BlbmlkLXN0cy1jb25uZWN0IiwiYWNjb3VudCJdLCJzdWIiOiIxYmMzYWUxOC0wNzE4LTRjMmYtOWY2OC1kOWI1ZDQzYjU5NzMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIzMDViMzdmYS1lMmVjLTRjNDMtOWM0MS0yMmNlMDA3MTMwYmUiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm1hbmFnZXIiLCJvZmZsaW5lX2FjY2VzcyIsIm9yZ19nbG9iYWxfYWRtaW4iLCJ1bWFfYXV0aG9yaXphdGlvbiIsIm9yZ19vd25lciIsImRlZmF1bHQtcm9sZXMtdmVnYWNsb3VkIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJ2aWV3LWlkZW50aXR5LXByb3ZpZGVycyIsInZpZXctcmVhbG0iLCJtYW5hZ2UtaWRlbnRpdHktcHJvdmlkZXJzIiwiaW1wZXJzb25hdGlvbiIsInJlYWxtLWFkbWluIiwiY3JlYXRlLWNsaWVudCIsIm1hbmFnZS11c2VycyIsInF1ZXJ5LXJlYWxtcyIsInZpZXctYXV0aG9yaXphdGlvbiIsInF1ZXJ5LWNsaWVudHMiLCJxdWVyeS11c2VycyIsIm1hbmFnZS1ldmVudHMiLCJtYW5hZ2UtcmVhbG0iLCJ2aWV3LWV2ZW50cyIsInZpZXctdXNlcnMiLCJ2aWV3LWNsaWVudHMiLCJtYW5hZ2UtYXV0aG9yaXphdGlvbiIsIm1hbmFnZS1jbGllbnRzIiwicXVlcnktZ3JvdXBzIl19LCJhd3Mtb3BlbmlkLXN0cy1jb25uZWN0Ijp7InJvbGVzIjpbImFybjphd3M6aWFtOjo1MTM5NzE1MDYxNzc6cm9sZS92ZWdhY2xvdWQtdmVnYWNsb3VkLWF3cy1kZWZhdWx0LXJvbGUiXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfSwiMzA1YjM3ZmEtZTJlYy00YzQzLTljNDEtMjJjZTAwNzEzMGJlIjp7InJvbGVzIjpbInVtYV9wcm90ZWN0aW9uIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTAuMTQuMy4xOTciLCJrZXljbG9ha191c2VyaWQiOiJiZDVkMjUwZS1hZGFhLTQ2ZjAtOGM3MS0xOGYwM2ZiNjg5MzEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJzZXJ2aWNlLWFjY291bnQtMzA1YjM3ZmEtZTJlYy00YzQzLTljNDEtMjJjZTAwNzEzMGJlIiwiY2xpZW50QWRkcmVzcyI6IjEwLjE0LjMuMTk3IiwiY2xpZW50X2lkIjoiMzA1YjM3ZmEtZTJlYy00YzQzLTljNDEtMjJjZTAwNzEzMGJlIn0.YdZxNAaG9sC6iZIkuRrJK4YLBIcJ51tU2i5FXzbSOlFKWm0cngB_BXjd4zkhHwVAXC2kY9Sn618anZinGs6N4eN_KgcREprMeFBx16Z9dKMLK19NWKalDUMZd5N75jimEKUP5kObQQ9fT0G2K9KTm0zfzhGlqy808zAAJRwSmgxUgwo_hL7hz2owBDfmZgj2JGZaQF71k5ZbuA3bC5DWSPVIXtOwgJuXBuyME64fhfOEGqu-owppbn_2TiRVV5ra7cCYhptdRss_AWDaMj5SqKxJ3ptd4dG4wcKZOzk_VoBJX94uADdjW0E0cBrHRIg5jlWh6A-wpswL6KYkYidwmw expiresIn=36000 function=GetVegaAuthToken
time="2025-01-07T18:12:11Z" level=debug msg="Successfully checked in with the metrics server" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Successfully created metrics agent" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Starting liveness probe server on :80" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Starting metrics agent main loop" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Starting metrics collection immediately as per configuration" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=network component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=job component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=replicaset component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Starting Kubernetes Data Collection"
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=node component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=pv component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=pvc component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=daemonset component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=workload component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed persistent volume claims" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected PVC metrics" count=0
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=cronjob component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected job metrics" count=0
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=hpa component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed ReplicaSets" count=2
time="2025-01-07T18:12:11Z" level=debug msg="Processing ReplicaSet" namespace=kube-system replicaset=coredns-787cb67946
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for ReplicaSet" available=2 conditions=0 namespace=kube-system ready=2 replicas=2 replicaset=coredns-787cb67946
time="2025-01-07T18:12:11Z" level=debug msg="Processing ReplicaSet" namespace=vegacloud replicaset=metrics-agent-8bb596c86
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for ReplicaSet" available=1 conditions=0 namespace=vegacloud ready=1 replicas=1 replicaset=metrics-agent-8bb596c86
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected replicaset metrics" count=2
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=pod component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Processing daemonset" daemonset=aws-node namespace=kube-system
time="2025-01-07T18:12:11Z" level=debug msg="Converted daemonset to metrics" daemonset=aws-node desired=2 namespace=kube-system ready=2
time="2025-01-07T18:12:11Z" level=debug msg="Processing daemonset" daemonset=kube-proxy namespace=kube-system
time="2025-01-07T18:12:11Z" level=debug msg="Converted daemonset to metrics" daemonset=kube-proxy desired=2 namespace=kube-system ready=2
time="2025-01-07T18:12:11Z" level=debug msg="Collected daemonset metrics" count=2
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=replicationcontroller component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Processing service" namespace=default service=kubernetes
time="2025-01-07T18:12:11Z" level=debug msg="Parsed service metrics" namespace=default ports=1 service=kubernetes type=ClusterIP
time="2025-01-07T18:12:11Z" level=debug msg="Processing service" namespace=kube-system service=eks-extension-metrics-api
time="2025-01-07T18:12:11Z" level=debug msg="Parsed service metrics" namespace=kube-system ports=1 service=eks-extension-metrics-api type=ClusterIP
time="2025-01-07T18:12:11Z" level=debug msg="Processing service" namespace=kube-system service=kube-dns
time="2025-01-07T18:12:11Z" level=info msg="Current client identity" function=VerifyClientIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:11Z" level=debug msg="Verified collector client identity" collector=PodCollector
time="2025-01-07T18:12:11Z" level=debug msg="Parsed service metrics" namespace=kube-system ports=3 service=kube-dns type=ClusterIP
time="2025-01-07T18:12:11Z" level=debug msg="Collected service metrics" count=3
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 0 cron jobs"
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for 0 cron jobs"
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=storageclass component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for HPAs" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected HPA metrics" count=0
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=cluster component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Service account token length: 1270" collector=ClusterCollector
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed persistent volumes" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected persistent volume metrics" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Processing deployment" deployment=coredns namespace=kube-system
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for deployment" available=2 deployment=coredns namespace=kube-system ready=2 replicas=2
time="2025-01-07T18:12:11Z" level=debug msg="Processing deployment" deployment=metrics-agent namespace=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for deployment" available=1 deployment=metrics-agent namespace=vegacloud ready=1 replicas=1
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected deployment metrics" count=2
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed persistent volumes" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected persistent volume metrics" count=0
time="2025-01-07T18:12:11Z" level=info msg="Collecting metrics" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector=namespace component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Collecting namespace metrics"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 0 ingresses"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed replication controllers" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected replication controller metrics" count=0
time="2025-01-07T18:12:11Z" level=info msg="Current client identity" function=VerifyClientIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:11Z" level=debug msg="Verified collector client identity" collector=ClusterCollector
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 7 pods"
time="2025-01-07T18:12:11Z" level=debug msg="Processing namespace" namespace=default
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for 0 statefulsets"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected statefulset metrics" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for 2 daemonsets"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected daemonset metrics" count=2
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 2 nodes" collector=ClusterCollector
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for 0 jobs"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected job metrics" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Processing daemonset" daemonset=aws-node namespace=kube-system
time="2025-01-07T18:12:11Z" level=debug msg="Converted daemonset to metrics" daemonset=aws-node desired=2 namespace=kube-system ready=2
time="2025-01-07T18:12:11Z" level=debug msg="Processing daemonset" daemonset=kube-proxy namespace=kube-system
time="2025-01-07T18:12:11Z" level=debug msg="Converted daemonset to metrics" daemonset=kube-proxy desired=2 namespace=kube-system ready=2
time="2025-01-07T18:12:11Z" level=debug msg="Collected daemonset metrics" count=2
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 7 pods" collector=ClusterCollector
time="2025-01-07T18:12:11Z" level=debug msg="Calculated total capacity: CPU=4000, Memory=8027226112, Storage=0, EphemeralStorage=94345798292, Pods=34, GPUs=0"
time="2025-01-07T18:12:11Z" level=debug msg="Calculated total allocatable: CPU=3860, Memory=6890569728, Storage=0, EphemeralStorage=94345798292, Pods=34, GPUs=0"
time="2025-01-07T18:12:11Z" level=debug msg="Calculated total requests: CPU=1000, Memory=1220542464, EphemeralStorage=0, Pods=7, GPUs=0"
time="2025-01-07T18:12:11Z" level=debug msg="Calculated total limits: CPU=1000, Memory=4651483136, EphemeralStorage=0, Pods=7, GPUs=0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected HPA metrics" count=1
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/aws-node-cxkg6"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/aws-node-cxkg6: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 0 network policies"
time="2025-01-07T18:12:11Z" level=debug msg="Collected capacity metrics" provisionedCount=0 storageClass=gp2 totalRequested=0
time="2025-01-07T18:12:11Z" level=debug msg="Parsed metrics for storage class gp2"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for 1 storage classes"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 0 cron jobs"
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for 0 cron jobs"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/aws-node-cxkg6"
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for HPAs" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected HPA metrics" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=default pods=0 storage=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=default quotasCount=0
time="2025-01-07T18:12:11Z" level=debug msg="Processing namespace" namespace=kube-node-lease
time="2025-01-07T18:12:11Z" level=info msg="Current client identity" function=VerifyClientIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:11Z" level=debug msg="Verified collector client identity" collector=PodCollector
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed 7 pods"
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=kube-node-lease pods=0 storage=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-node-lease quotasCount=0
time="2025-01-07T18:12:11Z" level=debug msg="Processing namespace" namespace=kube-public
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/aws-node-cxkg6"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/aws-node-cxkg6: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/aws-node-cxkg6"
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=kube-public pods=0 storage=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-public quotasCount=0
time="2025-01-07T18:12:11Z" level=debug msg="Processing namespace" namespace=kube-system
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace usage metrics" cpu=500 memory=146800640 namespace=kube-system pods=6 storage=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-system quotasCount=0
time="2025-01-07T18:12:11Z" level=debug msg="Processing namespace" namespace=vegacloud
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/aws-node-dgctk"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/aws-node-dgctk: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace usage metrics" cpu=500 memory=1073741824 namespace=vegacloud pods=1 storage=0
time="2025-01-07T18:12:11Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=vegacloud quotasCount=0
time="2025-01-07T18:12:11Z" level=debug msg="Completed namespace metrics collection" count=5
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/aws-node-dgctk"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/aws-node-dgctk"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/aws-node-dgctk: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/aws-node-dgctk"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/coredns-787cb67946-ct9fg"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/coredns-787cb67946-ct9fg: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/coredns-787cb67946-ct9fg"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/coredns-787cb67946-ct9fg"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/coredns-787cb67946-ct9fg: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/coredns-787cb67946-jg7pm"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/coredns-787cb67946-jg7pm: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/coredns-787cb67946-ct9fg"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/coredns-787cb67946-jg7pm"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/kube-proxy-dl68b"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/kube-proxy-dl68b: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/coredns-787cb67946-jg7pm"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/coredns-787cb67946-jg7pm: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/kube-proxy-dl68b"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/coredns-787cb67946-jg7pm"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/kube-proxy-dl68b"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/kube-proxy-dl68b: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/kube-proxy-dl68b"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/kube-proxy-tvzbn"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/kube-proxy-tvzbn: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod kube-system/kube-proxy-tvzbn"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod kube-system/kube-proxy-tvzbn: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/kube-proxy-tvzbn"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod kube-system/kube-proxy-tvzbn"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod vegacloud/metrics-agent-8bb596c86-pdlq6"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod vegacloud/metrics-agent-8bb596c86-pdlq6: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully extracted container metrics for pod vegacloud/metrics-agent-8bb596c86-pdlq6"
time="2025-01-07T18:12:11Z" level=debug msg="Total restarts for pod vegacloud/metrics-agent-8bb596c86-pdlq6: 0"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod vegacloud/metrics-agent-8bb596c86-pdlq6"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected enhanced pod metrics"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected pod metrics"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: storageclass_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: namespace_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: hpa_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: cronjob_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: daemonset_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: workload_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: job_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: replicaset_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected metrics for pod vegacloud/metrics-agent-8bb596c86-pdlq6"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected enhanced pod metrics"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected pod metrics"
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected job metrics" count=0
time="2025-01-07T18:12:11Z" level=debug msg="Successfully listed ReplicaSets" count=2
time="2025-01-07T18:12:11Z" level=debug msg="Processing ReplicaSet" namespace=kube-system replicaset=coredns-787cb67946
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for ReplicaSet" available=2 conditions=0 namespace=kube-system ready=2 replicas=2 replicaset=coredns-787cb67946
time="2025-01-07T18:12:11Z" level=debug msg="Processing ReplicaSet" namespace=vegacloud replicaset=metrics-agent-8bb596c86
time="2025-01-07T18:12:11Z" level=debug msg="Collected metrics for ReplicaSet" available=1 conditions=0 namespace=vegacloud ready=1 replicas=1 replicaset=metrics-agent-8bb596c86
time="2025-01-07T18:12:11Z" level=debug msg="Successfully collected replicaset metrics" count=2
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector job to S3"
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: pv_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector workload to S3"
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: cluster_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector pv to S3"
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: pod_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector cluster to S3"
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: pvc_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully listed persistent volume claims" count=0
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected PVC metrics" count=0
time="2025-01-07T18:12:12Z" level=debug msg="Processing deployment" deployment=coredns namespace=kube-system
time="2025-01-07T18:12:12Z" level=debug msg="Collected metrics for deployment" available=2 deployment=coredns namespace=kube-system ready=2 replicas=2
time="2025-01-07T18:12:12Z" level=debug msg="Processing deployment" deployment=metrics-agent namespace=vegacloud
time="2025-01-07T18:12:12Z" level=debug msg="Collected metrics for deployment" available=1 deployment=metrics-agent namespace=vegacloud ready=1 replicas=1
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected deployment metrics" count=2
time="2025-01-07T18:12:12Z" level=debug msg="Collected metrics for 0 statefulsets"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected statefulset metrics" count=0
time="2025-01-07T18:12:12Z" level=debug msg="Collected metrics for 2 daemonsets"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected daemonset metrics" count=2
time="2025-01-07T18:12:12Z" level=debug msg="Collected metrics for 0 jobs"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected job metrics" count=0
time="2025-01-07T18:12:12Z" level=debug msg="Successfully listed replication controllers" count=0
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected replication controller metrics" count=0
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector pod to S3"
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: replicationcontroller_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=debug msg="Collected capacity metrics" provisionedCount=0 storageClass=gp2 totalRequested=0
time="2025-01-07T18:12:12Z" level=debug msg="Parsed metrics for storage class gp2"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected metrics for 1 storage classes"
time="2025-01-07T18:12:12Z" level=debug msg="Service account token length: 1270" collector=ClusterCollector
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector pvc to S3"
time="2025-01-07T18:12:12Z" level=info msg="Current client identity" function=VerifyClientIdentity groups="[system:serviceaccounts system:serviceaccounts:vegacloud system:authenticated]" uid=9e60d9bd-0ff4-4a52-8b60-117b9cff2cdf username="system:serviceaccount:vegacloud:vega-metrics-sa"
time="2025-01-07T18:12:12Z" level=debug msg="Verified collector client identity" collector=ClusterCollector
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: network_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully listed 2 nodes" collector=ClusterCollector
time="2025-01-07T18:12:12Z" level=debug msg="Successfully listed 7 pods" collector=ClusterCollector
time="2025-01-07T18:12:12Z" level=debug msg="Calculated total capacity: CPU=4000, Memory=8027226112, Storage=0, EphemeralStorage=94345798292, Pods=34, GPUs=0"
time="2025-01-07T18:12:12Z" level=debug msg="Calculated total allocatable: CPU=3860, Memory=6890569728, Storage=0, EphemeralStorage=94345798292, Pods=34, GPUs=0"
time="2025-01-07T18:12:12Z" level=debug msg="Calculated total requests: CPU=1000, Memory=1220542464, EphemeralStorage=0, Pods=7, GPUs=0"
time="2025-01-07T18:12:12Z" level=debug msg="Calculated total limits: CPU=1000, Memory=4651483136, EphemeralStorage=0, Pods=7, GPUs=0"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully collected HPA metrics" count=1
time="2025-01-07T18:12:12Z" level=debug msg="Collecting namespace metrics"
time="2025-01-07T18:12:12Z" level=debug msg="Processing namespace" namespace=default
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=default pods=0 storage=0
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=default quotasCount=0
time="2025-01-07T18:12:12Z" level=debug msg="Processing namespace" namespace=kube-node-lease
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=kube-node-lease pods=0 storage=0
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-node-lease quotasCount=0
time="2025-01-07T18:12:12Z" level=debug msg="Processing namespace" namespace=kube-public
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector replicationcontroller to S3"
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace usage metrics" cpu=0 memory=0 namespace=kube-public pods=0 storage=0
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-public quotasCount=0
time="2025-01-07T18:12:12Z" level=debug msg="Processing namespace" namespace=kube-system
time="2025-01-07T18:12:12Z" level=debug msg="getPresignedURL: Generating presigned URL for object key: node_2025-01-07_18:12UTC.json"
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace usage metrics" cpu=500 memory=146800640 namespace=kube-system pods=6 storage=0
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=kube-system quotasCount=0
time="2025-01-07T18:12:12Z" level=debug msg="Processing namespace" namespace=vegacloud
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace usage metrics" cpu=500 memory=1073741824 namespace=vegacloud pods=1 storage=0
time="2025-01-07T18:12:12Z" level=debug msg="Collected namespace metrics" conditionsCount=0 limitsCount=0 namespace=vegacloud quotasCount=0
time="2025-01-07T18:12:12Z" level=debug msg="Completed namespace metrics collection" count=5
time="2025-01-07T18:12:12Z" level=debug msg="Processing service" namespace=default service=kubernetes
time="2025-01-07T18:12:12Z" level=debug msg="Parsed service metrics" namespace=default ports=1 service=kubernetes type=ClusterIP
time="2025-01-07T18:12:12Z" level=debug msg="Processing service" namespace=kube-system service=eks-extension-metrics-api
time="2025-01-07T18:12:12Z" level=debug msg="Parsed service metrics" namespace=kube-system ports=1 service=eks-extension-metrics-api type=ClusterIP
time="2025-01-07T18:12:12Z" level=debug msg="Processing service" namespace=kube-system service=kube-dns
time="2025-01-07T18:12:12Z" level=debug msg="Parsed service metrics" namespace=kube-system ports=3 service=kube-dns type=ClusterIP
time="2025-01-07T18:12:12Z" level=debug msg="Collected service metrics" count=3
time="2025-01-07T18:12:12Z" level=debug msg="Successfully listed 0 ingresses"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully listed 0 network policies"
time="2025-01-07T18:12:12Z" level=debug msg="Collector status length" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 collector_status_length=15 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:12Z" level=debug msg="Agent status" agent_status=Error client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:12Z" level=debug msg=Payload client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud payload="{\"agent_id\":\"4487b077-76e5-4f66-8508-b59f7701056f\",\"cluster_name\":\"testcluster-2\",\"cluster_version\":\"v1.30.8-eks-2d5f260\",\"agent_version\":\"1.1.3\",\"schema_version\":\"1.2.0\",\"cluster_provider\":\"AWS\",\"agent_status\":\"Error\",\"collector_status\":{\"cluster\":\"Ok\",\"cronjob\":\"Ok\",\"daemonset\":\"Ok\",\"hpa\":\"Ok\",\"job\":\"Ok\",\"namespace\":\"Ok\",\"network\":\"Ok\",\"node\":\"Ok\",\"pod\":\"Ok\",\"pv\":\"Ok\",\"pvc\":\"Ok\",\"replicaset\":\"Ok\",\"replicationcontroller\":\"Ok\",\"storageclass\":\"Ok\",\"workload\":\"Ok\"}}"
time="2025-01-07T18:12:12Z" level=debug msg="Payload Json" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud payload_string="{\"agent_id\":\"4487b077-76e5-4f66-8508-b59f7701056f\",\"cluster_name\":\"testcluster-2\",\"cluster_version\":\"v1.30.8-eks-2d5f260\",\"agent_version\":\"1.1.3\",\"schema_version\":\"1.2.0\",\"cluster_provider\":\"AWS\",\"agent_status\":\"Error\",\"collector_status\":{\"cluster\":\"Ok\",\"cronjob\":\"Ok\",\"daemonset\":\"Ok\",\"hpa\":\"Ok\",\"job\":\"Ok\",\"namespace\":\"Ok\",\"network\":\"Ok\",\"node\":\"Ok\",\"pod\":\"Ok\",\"pv\":\"Ok\",\"pvc\":\"Ok\",\"replicaset\":\"Ok\",\"replicationcontroller\":\"Ok\",\"storageclass\":\"Ok\",\"workload\":\"Ok\"}}"
time="2025-01-07T18:12:12Z" level=info msg="Successfully uploaded metrics for collector node to S3"
time="2025-01-07T18:12:12Z" level=debug msg="Successfully checked in with the metrics server" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector hpa to S3"
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector cronjob to S3"
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector daemonset to S3"
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector namespace to S3"
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector replicaset to S3"
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector storageclass to S3"
time="2025-01-07T18:12:13Z" level=info msg="Successfully uploaded metrics for collector network to S3"
time="2025-01-07T18:12:13Z" level=debug msg="Successfully collected and uploaded metrics, in 2.263827306s" client_id=305b37fa-e2ec-4c43-9c41-22ce007130be cluster_name=testcluster-2 component=MetricsAgent function=NewMetricsAgent org_slug=vegacloud
